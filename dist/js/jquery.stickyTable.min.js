!function(d){var e={headerName:"#header",fixedName:".head_fixed",stickyCellName:".sticky_cell",stickyCellTop:".sticky_cell.top",stickyCellEmpty:"",left:0,isFloatingScroll:!0,waitTimer:100};function t(i,t){this.w=d(document),this.e=d(i),this.options=d.extend({},e,t),this.init()}t.prototype={init:function(){var t=this,e=t.options,l=t.e;t.scrollVisible=!0,t.skipSyncContainer=t.skipSyncWidget=!1;var i=' <div class="head_fixed on">';i+="\t<table>",i+=l.find("thead").clone()[0].outerHTML,i+="\t</table>",i+="</div>",l.prepend(i);var s=l.find(e.fixedName);function n(){s.css("width",l.outerWidth())}0<e.left&&t.stickyLeft(),0<e.right&&t.stickyRight(),e.isFloatingScroll&&t.floatingScroll(),n(),d(window).on("resize",_.throttle(n,e.waitTimer)),t.stickyHeader();var o=t.scrollMoveLeft();d(window).on("scroll",function(){var i=d(window).scrollLeft();t.stickyHeader(),e.isFloatingScroll&&t.checkVisibility(),o(i)}),l.on("scroll",function(){var i=l.scrollLeft();s.find("table").css("margin-left",-i),e.isFloatingScroll&&!t.skipSyncWidget&&(t.syncWidget(),t.skipSyncWidget=!1)})},stickyHeader:function(){var i=this.options,t=this.e,e=t.find(i.fixedName),l=d(window).scrollTop();t.offset().top<l?e.addClass("on"):e.removeClass("on")},scrollMoveLeft:function(){var s=this.options,n=this.e,o=0,c=d(s.stickyCellTop+":visible").outerWidth();return function(i){if(o!==i){var t=d(s.fixedName),e=d(s.fixedName).find(s.stickyCellTop),l=n.offset().left-i;t.css("left",l),""===s.stickyCellEmpty?e.css("left",l-c+1):e.add(s.stickyCellEmpty).css("left",l-c+1),o=i}}},stickyLeft:function(){for(var i=this.options,t=this.e,e=0,l=0,s=1;s<=i.left;s++){var n="sticky_cell";t.find("th:nth-child("+s+")").addClass(n),t.find("td:nth-child("+s+")").addClass(n);var o=s-1,c=d("."+n)[o];if(e+=c.offsetWidth-1,1<=o)l+=c.previousElementSibling.offsetWidth-1,d("."+n+":nth-child("+s+")").css("left",l+"px")}t.css({"margin-left":e})},floatingScroll:function(){var i=this,t=i.e;widget=i.widget=d("<div class='fl-scrolls'></div>"),d("<div></div>").appendTo(widget).css({width:t[0].scrollWidth+"px"}),widget.appendTo(t),i.checkVisibility(),i.resizeScroll(),widget.on("scroll",function(){i.scrollVisible&&!i.skipSyncContainer&&i.syncContainer(),i.skipSyncContainer=!1})},resizeScroll:function(){var i=this.e,t=this.widget,e=i[0].clientWidth,l=i[0].scrollWidth;t.width(e).css("left",i[0].getBoundingClientRect().left+"px"),d("div",t).width(l),e<l&&t.height(t[0].offsetHeight-t[0].clientHeight+1)},syncContainer:function(){var i=this,t=i.e,e=i.widget[0].scrollLeft;t[0].scrollLeft!==e&&(i.skipSyncWidget=!0,t[0].scrollLeft=e)},syncWidget:function(){var i=this,t=i.e[0].scrollLeft;i.widget[0].scrollLeft!==t&&(i.skipSyncContainer=!0,i.widget[0].scrollLeft=t)},checkVisibility:function(){var i=this.e,t=this.widget,e=t[0].scrollWidth<=t[0].offsetWidth;if(!e){var l=i[0].getBoundingClientRect(),s=window.innerHeight||document.documentElement.clientHeight;e=l.bottom<=s||l.top>s}this.scrollVisible===e&&(this.scrollVisible=!e,t.toggleClass("fl-scrolls-hidden"))}},d.fn.stickyTable=function(i){return this.each(function(){new t(this,i)})}}(jQuery);