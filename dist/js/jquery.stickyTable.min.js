!function(h){var e={headerName:"#header",fixedName:".head_fixed",stickyCellName:".sticky_cell",stickyCellTop:".sticky_cell.top",stickyCellEmpty:"",left:0,right:0,isFloatingScroll:!0,waitTimer:100};function t(i,t){this.w=h(document),this.e=h(i),this.options=h.extend({},e,t),this.init()}t.prototype={init:function(){var t=this,e=t.options,s=t.e;t.scrollVisible=!0,t.skipSyncContainer=t.skipSyncWidget=!1;var i=' <div class="head_fixed on">';i+="\t<table>",i+=s.find("thead").clone()[0].outerHTML,i+="\t</table>",i+="</div>",s.prepend(i);var l=s.find(e.fixedName);function n(){l.css("width",s.outerWidth())}0<e.left&&t.stickyLeft(),e.isFloatingScroll&&t.floatingScroll(),n(),h(window).on("resize",_.throttle(n,e.waitTimer)),t.stickyHeader();var o=t.scrollMoveLeft();h(window).on("scroll",function(){var i=h(window).scrollLeft();t.stickyHeader(),e.isFloatingScroll&&t.checkVisibility(),o(i)}),s.on("scroll",function(){var i=s.scrollLeft();l.find("table").css("margin-left",-i),e.isFloatingScroll&&!t.skipSyncWidget&&(t.syncWidget(),t.skipSyncWidget=!1)})},stickyHeader:function(){var i=this.options,t=this.e,e=t.find(i.fixedName),s=h(window).scrollTop();t.offset().top<s?e.addClass("on"):e.removeClass("on")},stickyLeft:function(){for(var i=this.options,t=this.e,e=0,s=0,l=1;l<=i.left;l++){var n=t.find("th:nth-child("+l+")"),o=t.find("td:nth-child("+l+")"),c="sticky_cell",r=l-1;n.addClass(c),o.addClass(c);var d=h("."+c).eq(r).outerWidth(),f=parseInt(h("."+c).css("left").replace("px",""));if(e+=d-1,1<=r)s+=h("."+c).eq(r).prev().outerWidth()-1,h("."+c+":nth-child("+l+")").css("left",s+f+"px")}var a=t.outerWidth();t.css({width:a-e,"margin-left":e})},scrollMoveLeft:function(){var l=this.options,n=this.e,o=0,c=h(l.stickyCellTop+":visible").outerWidth();return function(i){if(o!==i){var t=h(l.fixedName),e=h(l.fixedName).find(l.stickyCellTop),s=n.offset().left-i;t.css("left",s),""===l.stickyCellEmpty?e.css("left",s-c+1):e.add(l.stickyCellEmpty).css("left",s-c+1),o=i}}},floatingScroll:function(){var i=this,t=i.e;widget=i.widget=h("<div class='fl-scrolls'></div>"),h("<div></div>").appendTo(widget).css({width:t[0].scrollWidth+"px"}),widget.appendTo(t),i.resizeScroll(),widget.on("scroll",function(){i.scrollVisible&&!i.skipSyncContainer&&i.syncContainer(),i.skipSyncContainer=!1})},resizeScroll:function(){var i=this.e,t=this.widget,e=i[0].clientWidth,s=i[0].scrollWidth;t.width(e).css("left",i[0].getBoundingClientRect().left+"px"),h("div",t).width(s),e<s&&t.height(t[0].offsetHeight-t[0].clientHeight+1)},syncContainer:function(){var i=this,t=i.e,e=i.widget[0].scrollLeft;t[0].scrollLeft!==e&&(i.skipSyncWidget=!0,t[0].scrollLeft=e)},syncWidget:function(){var i=this.e[0].scrollLeft;this.widget[0].scrollLeft!==i&&(this.skipSyncContainer=!0,this.widget[0].scrollLeft=i)},checkVisibility:function(){var i=this.e,t=this.widget,e=t[0].scrollWidth<=t[0].offsetWidth;if(!e){var s=i[0].getBoundingClientRect(),l=window.innerHeight||document.documentElement.clientHeight;e=s.bottom<=l||s.top>l}this.scrollVisible===e&&(this.scrollVisible=!e,t.toggleClass("fl-scrolls-hidden"))}},h.fn.stickyTable=function(i){return this.each(function(){new t(this,i)})}}(jQuery);