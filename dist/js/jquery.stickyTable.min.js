!function(d){var e={container:".sticky_wrap",headerName:"#header",fixedName:".head_fixed",stickyCellName:".sticky_cell",stickyCellTop:".sticky_cell.top",stickyCellEmpty:"",left:0,right:0,isFloatingScroll:!0,isTheadFixed:!0,isOuterScroll:!0,isInnerScroll:!1,waitTimer:100};function t(i,t){this.w=d(document),this.e=d(i),this.options=d.extend({},e,t),this.init()}t.prototype={init:function(){var s=this,n=s.options,o=s.e;if(s.scrollVisible=!0,s.skipSyncContainer=s.skipSyncWidget=!1,o.find("td").length<=1)return!1;if(!d(n.container).length)return console.error("container값이 올바르지 않습니다."),!1;if(!n.headerName.length)return console.error("headerName값이 올바르지 않습니다. header가 없는 경우 빈 값으로 설정해주세요."),!1;if(n.isOuterScroll===n.isInnerScroll)return console.error("isOuterScroll와 isInnerScroll값은 반드시 다르게 설정해주세요."),!1;if(n.isTheadFixed){var i=o.find("thead").clone(),t=o.find("table")[0].className,e=' <div class="'+n.fixedName.replace(/\./g,"")+(n.isOuterScroll?" on":"")+'">';e+="\t<table"+(t?' class="'+t+'"':"")+">",e+=i[0].outerHTML,e+="\t</table>",e+="</div>",o.prepend(e)}var c=o.find(n.fixedName);0<n.left&&s.stickyLeft(),0<n.right&&s.stickyRight(),function(){function t(){c.css("width",n.isInnerScroll?o[0].offsetWidth-17:o[0].offsetWidth),s.rightPos(),n.isFloatingScroll&&s.floatingScroll(),n.isOuterScroll&&s.stickyHeader()}t();var e=null;d(window).on("resize",function(i){clearTimeout(e),e=setTimeout(t,n.waitTimer)});var l=s.scrollMoveLeft();n.isOuterScroll&&d(window).on("scroll",function(){var i=d(window).scrollLeft();s.stickyHeader(),n.isFloatingScroll&&(s.resizeScroll(),s.checkVisibility()),l(i)})}(),o.on("scroll",function(){var i=o.scrollLeft();c.find("table").css("margin-left",-i),n.isFloatingScroll&&!s.skipSyncWidget&&s.syncWidget(),s.skipSyncWidget=!1,n.isInnerScroll&&(o.scrollTop()<=0?o.find(n.fixedName).removeClass("on inr"):o.find(n.fixedName).addClass("on inr"))})},stickyHeader:function(){var i=this.options,t=this.e,e=t.find(i.fixedName),l=d(window).scrollTop(),s=t.offset().top,n=s+t.innerHeight(),o=d(i.headerName).length?d(i.headerName).outerHeight():0,c=s-o,r=0;e.removeClass("on"),c<l&&(e.addClass("on").css("top",o+"px"),r=e[0].offsetHeight),n-r-o<l&&e.removeClass("on")},scrollMoveLeft:function(){var n=this.options,l=this.e,o=0;return function(s){if(o!==s){var i=l.find(n.fixedName),t=i.find(n.stickyCellTop),e=l.offset().left-s;i.css("left",e),t.each(function(i,t){var e=parseInt(d(t).css("left").replace("px")),l=s-o;""===n.stickyCellEmpty?d(t).css("left",e-l+"px"):d(t).add(n.stickyCellEmpty).css("left",e-l+"px")}),o=s}}},stickyLeft:function(){for(var i=this.options,t=this.e,e=t.find(i.fixedName),l=0,s=0,n=i.stickyCellName.replace(/\./g," ").trim(),o=i.stickyCellTop.replace(/\./g," ").trim(),c=t.parents(i.container).length?t.parents(i.container)[0].getBoundingClientRect().left:0,r=1;r<=i.left;r++){t.find("th:nth-child("+r+")").addClass(o).attr("data-fix","left"),t.find("td:nth-child("+r+")").addClass(n).attr("data-fix","left");var d=r-1,a=t.find(i.stickyCellName+':not(".top")')[d];if(l+=a.offsetWidth-1,0==d)e.find(i.stickyCellTop+":nth-child(1)").css("left",c+"px");else if(1<=d){s+=a.previousElementSibling.offsetWidth-1,t.find(i.stickyCellTop+":nth-child("+r+")").css("left",s+"px"),t.find(i.stickyCellName+":nth-child("+r+")").css("left",s+"px"),e.find(i.stickyCellTop+":nth-child("+r+")").css("left",s+c+"px")}}t.css({"margin-left":l})},stickyRight:function(){for(var i=this.options,t=this.e,e=i.stickyCellTop.replace(/\./g," ").trim(),l=i.stickyCellName.replace(/\./g," ").trim(),s=t.find("table")[0].rows[0].cells.length,n=1;n<=i.right;n++){var o=s-(n-1);t.find("th:nth-child("+o+")").addClass(e).attr("data-fix","right"),t.find("td:nth-child("+o+")").addClass(l).attr("data-fix","right")}},rightPos:function(){for(var i=this.options,t=this.e,e=t.parents(i.container),l=t.find(i.fixedName),s=0,n=e.length?e[0].getBoundingClientRect().left:0,o=e.length?e[0].getBoundingClientRect().right:0,c=t.find("table")[0].rows[0].cells.length,r=1;r<=i.right;r++){var d=r-1,a=c-d,f=t.find(i.stickyCellName+'[data-fix="right"]:not(".top")')[d],h=o-(s+=(f?f.offsetWidth:0)-1)-n;t.find(i.stickyCellTop+":nth-child("+a+")").css("left",h+"px"),t.find(i.stickyCellName+":nth-child("+a+")").css("left",h+"px"),l.find(i.stickyCellTop+":nth-child("+a+")").css("left",h+n+"px")}t.css({"margin-right":s})},floatingScroll:function(){var i=this,t=i.e;widget=i.widget=d("<div class='fl-scrolls'></div>"),$flScrolls=t.find(".fl-scrolls"),$flScrolls.length&&$flScrolls.remove(),d("<div></div>").appendTo(widget).css({width:t[0].scrollWidth+"px"}),widget.appendTo(t),i.resizeScroll(),i.checkVisibility(),widget.on("scroll",function(){i.scrollVisible&&!i.skipSyncContainer&&i.syncContainer(),i.skipSyncContainer=!1})},resizeScroll:function(){var i=this.e,t=this.widget,e=i[0].clientWidth,l=i[0].scrollWidth;t.width(e).css("left",i[0].getBoundingClientRect().left+"px"),d("div",t).width(l),e<l&&t.height(t[0].offsetHeight-t[0].clientHeight+1)},syncContainer:function(){var i=this.e,t=this.widget[0].scrollLeft;i[0].scrollLeft!==t&&(this.skipSyncWidget=!0,i[0].scrollLeft=t)},syncWidget:function(){var i=this.e[0].scrollLeft;this.widget[0].scrollLeft!==i&&(this.skipSyncContainer=!0,this.widget[0].scrollLeft=i)},checkVisibility:function(){var i=this,t=i.e,e=i.widget,l=e[0].scrollWidth<=e[0].offsetWidth;if(!l){var s=t[0].getBoundingClientRect(),n=window.innerHeight||document.documentElement.clientHeight;l=s.bottom<=n||s.top>n}i.scrollVisible===l&&(i.scrollVisible=!l),i.scrollVisible?e.removeClass("fl-scrolls-hidden"):e.addClass("fl-scrolls-hidden")}},d.fn.stickyTable=function(i){return this.each(function(){new t(this,i)})}}(jQuery);