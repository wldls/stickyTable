!function(p){var i={container:".sticky_wrap",headerName:"#header",fixedName:".head_fixed",stickyCellName:".sticky_cell",stickyCellTop:".sticky_cell.top",stickyCellEmpty:"",left:0,right:0,isFloatingScroll:!0,isTheadFixed:!0,isOuterScroll:!0,isInnerScroll:!1,waitTimer:100};function t(e,t){this.w=p(document),this.e=p(e),this.options=p.extend({},i,t),this.init()}t.prototype={init:function(){var e,t,i,s=this,n=s.options,r=s.e;if(s.scrollVisible=!0,s.skipSyncContainer=s.skipSyncWidget=!1,r.find("td").length<=1)return!1;if(!p(n.container).length)return console.error("container값이 올바르지 않습니다."),!1;if(!n.headerName.length)return console.error("headerName값이 올바르지 않습니다. header가 없는 경우 빈 값으로 설정해주세요."),!1;if(n.isOuterScroll===n.isInnerScroll)return console.error("isOuterScroll와 isInnerScroll값은 반드시 다르게 설정해주세요."),!1;r.find("tbody tr").each(function(e,t){var i=p(t).find("td:first-child"),l=i.css("padding-top").replace("px",""),s=i.css("padding-bottom").replace("px",""),i=i.css("border-top-width").replace("px",""),i=t.offsetHeight-Number(l)-Number(s)-Number(i);p(t).find("td").height(i)}),n.isTheadFixed&&(e=r.find("thead").clone(),t=r.find("table")[0].className,i=' <div class="'+n.fixedName.replace(/\./g,"")+(n.isOuterScroll?" on":"")+'">',i+="\t<table"+(t?' class="'+t+'"':"")+">",i+=e[0].outerHTML,i+="\t</table>",i+="</div>",r.prepend(i));var o=r.find(n.fixedName);0<n.left&&s.stickyLeft(),0<n.right&&s.stickyRight(),p(".merge").length&&s.cellMerge(),function(){function t(){o.css("width",n.isInnerScroll?r[0].offsetWidth-17:r[0].offsetWidth),s.rightPos(),n.isFloatingScroll&&s.floatingScroll(),n.isOuterScroll&&s.stickyHeader()}t();var i=null;p(window).on("resize",function(e){clearTimeout(i),i=setTimeout(t,n.waitTimer)});var l=s.scrollMoveLeft();n.isOuterScroll&&p(window).on("scroll",function(){var e=p(window).scrollLeft();s.stickyHeader(),n.isFloatingScroll&&(s.resizeScroll(),s.checkVisibility()),l(e)})}(),r.on("scroll",function(){var e=r.scrollLeft();o.find("table").css("margin-left",-e),n.isFloatingScroll&&!s.skipSyncWidget&&s.syncWidget(),s.skipSyncWidget=!1,n.isInnerScroll&&(r.scrollTop()<=0?r.find(n.fixedName).removeClass("on inr"):r.find(n.fixedName).addClass("on inr"))})},cellMerge:function(){p(".merge").each(function(e,t){var i=p(t).hasClass("col"),l=p(t).hasClass("row"),s=p(t).data("merge");if(p(t).find(".desc").css({position:"absolute"}),i){for(var n=p(t),r=Number(p(t).css("padding-right").replace("px","")),o=Number(p(t).css("border-right-width").replace("px","")),c=0,e=0;e<s;e++){var d=n.outerWidth()-1;c+=0<e&&e<s-1?d:d-r,0!==e&&n.css("z-index","-1"),n=n.next()}p(t).width(c-o)}else if(l){var a=(n=p(t)).parents("tr"),r=Number(p(t).css("padding-top").replace("px","")),o=Number(p(t).css("border-top-width").replace("px","")),f=0,h=a.find('th:not(".sticky_cell")');if(h[0].hasAttribute("rowspan"))f=h.outerHeight()-2*r;else for(e=0;e<s;e++)f+=0<e&&e<s-1?h.outerHeight()-o:h.outerHeight()-r,a=h.parents("tr"),$thAll=a.next().find(t.nodeName),h=$thAll.not(".sticky_cell"),$thAll.css({top:"0px","z-index":"-1"});p(t).height(f-o)}})},stickyHeader:function(){var e=this.options,t=this.e,i=t.find(e.fixedName),l=p(window).scrollTop(),s=t.offset().top,n=s+t.innerHeight(),t=p(e.headerName).length?p(e.headerName).outerHeight():0,e=s-t,s=0;i.removeClass("on"),e<l&&(i.addClass("on").css("top",t+"px"),s=i[0].offsetHeight),n-s-t<l&&i.removeClass("on")},scrollMoveLeft:function(){var n=this.options,l=this.e,r=0;return function(s){var e,t,i;r!==s&&(t=(e=l.find(n.fixedName)).find(n.stickyCellTop),i=l.offset().left-s,e.css("left",i),t.each(function(e,t){var i=parseInt(p(t).css("left").replace("px")),l=s-r;(""===n.stickyCellEmpty?p(t):p(t).add(n.stickyCellEmpty)).css("left",i-l+"px")}),r=s)}},stickyLeft:function(){for(var e=this.options,t=this.e,i=t.find(e.fixedName),l=0,s=0,n=e.stickyCellName.replace(/\./g," ").trim(),r=e.stickyCellTop.replace(/\./g," ").trim(),o=t.parents(e.container).length?t.parents(e.container)[0].getBoundingClientRect().left:0,c=1;c<=e.left;c++){t.find("th:nth-child("+c+")").addClass(r).attr("data-fix","left"),t.find("td:nth-child("+c+")").addClass(n).attr("data-fix","left");var d=c-1,a=t.find(e.stickyCellName+':not(".top")')[d];l+=a.offsetWidth-1,0==d?i.find(e.stickyCellTop+":nth-child(1)").css("left",o+"px"):1<=d&&(s+=a.previousElementSibling.offsetWidth-1,t.find(e.stickyCellTop+":nth-child("+c+")").css("left",s+"px"),t.find(e.stickyCellName+":nth-child("+c+")").css("left",s+"px"),i.find(e.stickyCellTop+":nth-child("+c+")").css("left",s+o+"px"))}t.css({"margin-left":l})},stickyRight:function(){for(var e=this.options,t=this.e,i=e.stickyCellTop.replace(/\./g," ").trim(),l=e.stickyCellName.replace(/\./g," ").trim(),s=t.find("table")[0].rows[0].cells.length,n=1;n<=e.right;n++){var r=s-(n-1);t.find("th:nth-child("+r+")").addClass(i).attr("data-fix","right"),t.find("td:nth-child("+r+")").addClass(l).attr("data-fix","right")}},rightPos:function(){for(var e=this.options,t=this.e,i=t.parents(e.container),l=t.find(e.fixedName),s=0,n=i.length?i[0].getBoundingClientRect().left:0,r=i.length?i[0].getBoundingClientRect().right:0,o=t.find("table")[0].rows[0].cells.length,c=1;c<=e.right;c++){var d=c-1,a=o-d,d=t.find(e.stickyCellName+'[data-fix="right"]:not(".top")')[d],d=r-(s+=(d?d.offsetWidth:0)-1)-n;t.find(e.stickyCellTop+":nth-child("+a+")").css("left",d+"px"),t.find(e.stickyCellName+":nth-child("+a+")").css("left",d+"px"),l.find(e.stickyCellTop+":nth-child("+a+")").css("left",d+n+"px")}t.css({"margin-right":s})},floatingScroll:function(){var e=this,t=e.e;widget=e.widget=p("<div class='fl-scrolls'></div>"),$flScrolls=t.find(".fl-scrolls"),$flScrolls.length&&$flScrolls.remove(),p("<div></div>").appendTo(widget).css({width:t[0].scrollWidth+"px"}),widget.appendTo(t),e.resizeScroll(),e.checkVisibility(),widget.on("scroll",function(){e.scrollVisible&&!e.skipSyncContainer&&e.syncContainer(),e.skipSyncContainer=!1})},resizeScroll:function(){var e=this.e,t=this.widget,i=e[0].clientWidth,l=e[0].scrollWidth;t.width(i).css("left",e[0].getBoundingClientRect().left+"px"),p("div",t).width(l),i<l&&t.height(t[0].offsetHeight-t[0].clientHeight+1)},syncContainer:function(){var e=this.e,t=this.widget[0].scrollLeft;e[0].scrollLeft!==t&&(this.skipSyncWidget=!0,e[0].scrollLeft=t)},syncWidget:function(){var e=this.e[0].scrollLeft;this.widget[0].scrollLeft!==e&&(this.skipSyncContainer=!0,this.widget[0].scrollLeft=e)},checkVisibility:function(){var e,t=this,i=t.e,l=t.widget,s=l[0].scrollWidth<=l[0].offsetWidth;s||(e=i[0].getBoundingClientRect(),i=window.innerHeight||document.documentElement.clientHeight,s=e.bottom<=i||e.top>i),t.scrollVisible===s&&(t.scrollVisible=!s),t.scrollVisible?l.removeClass("fl-scrolls-hidden"):l.addClass("fl-scrolls-hidden")}},p.fn.stickyTable=function(e){return this.each(function(){new t(this,e)})}}(jQuery);