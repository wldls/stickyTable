!function(h){var e={headerName:"#header",fixedName:".head_fixed",stickyCellName:".sticky_cell",stickyCellTop:".sticky_cell.top",stickyCellEmpty:"",left:0,right:0,isFloatingScroll:!0,isOuterScroll:!0,waitTimer:250};function i(t,i){this.w=h(document),this.e=h(t),this.options=h.extend({},e,i),this.init()}i.prototype={init:function(){var s=this,c=s.options,n=s.e;if(s.scrollVisible=!0,s.skipSyncContainer=s.skipSyncWidget=!1,c.isOuterScroll){var t=' <div class="head_fixed on">';t+="\t<table>",t+=n.find("thead").clone()[0].outerHTML,t+="\t</table>",t+="</div>",n.prepend(t)}var o=n.find(c.fixedName);0<c.left&&s.stickyLeft(),0<c.right&&s.stickyRight(),c.isFloatingScroll&&s.floatingScroll(),function(){function i(){o.css("width",n[0].offsetWidth)}i();var e=null;h(window).on("resize",function(t){clearTimeout(e),e=setTimeout(i,c.waitTimer)}),s.stickyHeader();var l=s.scrollMoveLeft();h(window).on("scroll",function(){var t=h(window).scrollLeft();s.stickyHeader(),c.isFloatingScroll&&(s.resizeScroll(),s.checkVisibility()),l(t)})}(),n.on("scroll",function(){var t=n.scrollLeft();o.find("table").css("margin-left",-t),c.isFloatingScroll&&!s.skipSyncWidget&&(s.syncWidget(),s.skipSyncWidget=!1)})},stickyHeader:function(){var t=this.options,i=this.e,e=i.find(t.fixedName),l=h(window).scrollTop();i.offset().top<l?e.addClass("on"):e.removeClass("on")},scrollMoveLeft:function(){var n=this.options,o=this.e,d=0;return function(s){if(d!==s){var t=h(n.fixedName),i=h(n.fixedName).find(n.stickyCellTop+'[data-fix="left"]'),e=h(n.fixedName).find(n.stickyCellTop+'[data-fix="right"]'),l=o.offset().left-s,c=o.offset().left-o[0].offsetLeft;t.css("left",l),i.eq(0).css("left",c-s),i.each(function(t,i){if(0!==t){var e=h(i).outerWidth();""===n.stickyCellEmpty?h(i).css("left",l-e+1):h(i).add(n.stickyCellEmpty).css("left",l-e+1)}}),e.each(function(t,i){var e=parseInt(h(i).css("right").replace("px")),l=s-d;""===n.stickyCellEmpty?h(i).css("right",e+l+"px"):h(i).add(n.stickyCellEmpty).css("left",e+l+"px")}),d=s}}},stickyLeft:function(){var t=this.options,i=this.e,e=i.find(t.fixedName),l=0,s=0,c=t.stickyCellName.replace(/\./g," ").trim(),n=t.stickyCellTop.replace(/\./g," ").trim();tblPos=i[0].getBoundingClientRect().left;for(var o=1;o<=t.left;o++){i.find("th:nth-child("+o+")").addClass(n).attr("data-fix","left"),i.find("td:nth-child("+o+")").addClass(c).attr("data-fix","left");var d=o-1,r=h(t.stickyCellName)[d];if(l+=r.offsetWidth-1,0==d)e.find(t.stickyCellTop+":nth-child(1)").css("left",tblPos+"px");else if(1<=d){s+=r.previousElementSibling.offsetWidth-1,h(t.stickyCellTop+":nth-child("+o+")").css("left",s+"px"),h(t.stickyCellName+":nth-child("+o+")").css("left",s+"px"),e.find(t.stickyCellTop+":nth-child("+o+")").css("left",s+tblPos+"px")}}i.css({"margin-left":l})},stickyRight:function(){for(var t=this.options,i=this.e,e=i.find(t.fixedName),l=0,s=t.stickyCellTop.replace(/\./g," ").trim(),c=t.stickyCellName.replace(/\./g," ").trim(),n=h(window).width()-i[0].getBoundingClientRect().right,o=i.find("table")[0].rows[0].cells.length,d=1;d<=t.right;d++){var r=o-(d-1);i.find("th:nth-child("+r+")").addClass(s).attr("data-fix","right"),i.find("td:nth-child("+r+")").addClass(c).attr("data-fix","right");var f=h(t.stickyCellName+'[data-fix="right"]')[d].offsetWidth;if(l+=f-1,r<o){var a=l-f;h(t.stickyCellTop+":nth-child("+r+")").css("right",a+"px"),h(t.stickyCellName+":nth-child("+r+")").css("right",a+"px"),e.find(t.stickyCellTop+":nth-child("+r+")").css("right",a+n+"px")}else e.find(t.stickyCellTop+":nth-child("+o+")").css("right",n+"px")}i.css({"margin-right":l})},floatingScroll:function(){var t=this,i=t.e;widget=t.widget=h("<div class='fl-scrolls'></div>"),h("<div></div>").appendTo(widget).css({width:i[0].scrollWidth+"px"}),widget.appendTo(i),t.resizeScroll(),t.checkVisibility(),widget.on("scroll",function(){t.scrollVisible&&!t.skipSyncContainer&&t.syncContainer(),t.skipSyncContainer=!1})},resizeScroll:function(){var t=this.e,i=this.widget,e=t[0].clientWidth,l=t[0].scrollWidth;i.width(e).css("left",t[0].getBoundingClientRect().left+"px"),h("div",i).width(l),e<l&&i.height(i[0].offsetHeight-i[0].clientHeight+1)},syncContainer:function(){var t=this.e,i=this.widget[0].scrollLeft;t[0].scrollLeft!==i&&(this.skipSyncWidget=!0,t[0].scrollLeft=i)},syncWidget:function(){var t=this.e[0].scrollLeft;this.widget[0].scrollLeft!==t&&(this.skipSyncContainer=!0,this.widget[0].scrollLeft=t)},checkVisibility:function(){var t=this.e,i=this.widget,e=i[0].scrollWidth<=i[0].offsetWidth;if(!e){var l=t[0].getBoundingClientRect(),s=window.innerHeight||document.documentElement.clientHeight;e=l.bottom<=s||l.top>s}this.scrollVisible===e&&(this.scrollVisible=!e,i.toggleClass("fl-scrolls-hidden"))}},h.fn.stickyTable=function(t){return this.each(function(){new i(this,t)})}}(jQuery);